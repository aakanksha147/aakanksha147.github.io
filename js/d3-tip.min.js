!function(t,e){"function"==typeof define&&define.amd?define(["d3"],e):"object"==typeof module&&module.exports?module.exports=function(t){return t.tip=e(t),t.tip}:t.d3.tip=e(t.d3)}(this,function(t){return function(){function e(t){a=r(t),c=a.createSVGPoint(),document.body.appendChild(s)}function n(){var e=t.select(document.createElement("div"));return e.style({position:"absolute",top:0,opacity:0,"pointer-events":"none","box-sizing":"border-box"}),e.node()}function r(t){return"svg"===(t=t.node()).tagName.toLowerCase()?t:t.ownerSVGElement}function o(){return null===s&&(s=n(),document.body.appendChild(s)),t.select(s)}function i(){for(var e=p||t.event.target;void 0===e.getScreenCTM&&"undefined"===e.parentNode;)e=e.parentNode;var n={},r=e.getScreenCTM(),o=e.getBBox(),i=o.width,f=o.height,l=o.x,u=o.y;return c.x=l,c.y=u,n.nw=c.matrixTransform(r),c.x+=i,n.ne=c.matrixTransform(r),c.y+=f,n.se=c.matrixTransform(r),c.x-=i,n.sw=c.matrixTransform(r),c.y-=f/2,n.w=c.matrixTransform(r),c.x+=i,n.e=c.matrixTransform(r),c.x-=i/2,c.y-=f/2,n.n=c.matrixTransform(r),c.y+=f,n.s=c.matrixTransform(r),n}var f=function(){return"n"},l=function(){return[0,0]},u=function(){return" "},s=n(),a=null,c=null,p=null;e.show=function(){var t=Array.prototype.slice.call(arguments);t[t.length-1]instanceof SVGElement&&(p=t.pop());var n,r=u.apply(this,t),i=l.apply(this,t),s=f.apply(this,t),a=o(),c=d.length,m=document.documentElement.scrollTop||document.body.scrollTop,h=document.documentElement.scrollLeft||document.body.scrollLeft;for(a.html(r).style({opacity:1,"pointer-events":"all"});c--;)a.classed(d[c],!1);return n=y.get(s).apply(this),a.classed(s,!0).style({top:n.top+i[0]+m+"px",left:n.left+i[1]+h+"px"}),e},e.hide=function(){return o().style({opacity:0,"pointer-events":"none"}),e},e.attr=function(n,r){if(arguments.length<2&&"string"==typeof n)return o().attr(n);var i=Array.prototype.slice.call(arguments);return t.selection.prototype.attr.apply(o(),i),e},e.style=function(n,r){if(arguments.length<2&&"string"==typeof n)return o().style(n);var i=Array.prototype.slice.call(arguments);return t.selection.prototype.style.apply(o(),i),e},e.direction=function(n){return arguments.length?(f=null==n?n:t.functor(n),e):f},e.offset=function(n){return arguments.length?(l=null==n?n:t.functor(n),e):l},e.html=function(n){return arguments.length?(u=null==n?n:t.functor(n),e):u},e.destroy=function(){return s&&(o().remove(),s=null),e};var y=t.map({n:function(){var t=i();return{top:t.n.y-s.offsetHeight,left:t.n.x-s.offsetWidth/2}},s:function(){var t=i();return{top:t.s.y,left:t.s.x-s.offsetWidth/2}},e:function(){var t=i();return{top:t.e.y-s.offsetHeight/2,left:t.e.x}},w:function(){var t=i();return{top:t.w.y-s.offsetHeight/2,left:t.w.x-s.offsetWidth}},nw:function(){var t=i();return{top:t.nw.y-s.offsetHeight,left:t.nw.x-s.offsetWidth}},ne:function(){var t=i();return{top:t.ne.y-s.offsetHeight,left:t.ne.x}},sw:function(){var t=i();return{top:t.sw.y,left:t.sw.x-s.offsetWidth}},se:function(){var t=i();return{top:t.se.y,left:t.e.x}}}),d=y.keys();return e}});